---
import ServiceWorkerRegistration from "./view/components/ServiceWorkerRegistration.astro";
import MetaServiceWorker from "./view/components/MetaServiceWorker.astro";
import pwaOptions from "../pwa.config.json";

type PWAOptions = {
  isManifest?: boolean;
  forceUpdate?: boolean;
};

const isShowManifest = (pwaOptions as PWAOptions)?.isManifest || false;
---

{isShowManifest && <MetaServiceWorker />}
<ServiceWorkerRegistration />
<script>
  import SWUtils from "./view/utils/SWUtils";

  const swUtils = new SWUtils();
  swUtils.notificationPermissions();
  swUtils.forceUpdate();
</script>
