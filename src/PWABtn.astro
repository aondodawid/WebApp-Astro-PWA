---
import InstallBtn from "./view/components/InstallBtn.astro";

const { btnText , btnBackground, hideSvg } = Astro.props;
---
<script>
  import pwaSettings from "../pwa.config.json";
  import runPWASetup from "./view/utils/PWASetup";
  import { isPWAInstalled } from "./view/utils/utilities";

  const isShowBtn = pwaSettings.isInstallBtnVisible && (pwaSettings as any)?.isManifest ;
  const isInstalled = isPWAInstalled()
  const pwaBtn = document.getElementById("install");
  if(isInstalled) pwaBtn?.parentNode?.removeChild(pwaBtn);

  runPWASetup(isShowBtn);

</script>

<InstallBtn btnText={btnText} btnBackground={btnBackground} hideSvg={hideSvg} />>
